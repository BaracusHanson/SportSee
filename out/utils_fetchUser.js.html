<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/fetchUser.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/fetchUser.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const apiUrl = "http://localhost:3000/user/";

/**
 * Fetches user data from the API and combines it into a single object.
 *
 * @param {string} userId - The ID of the user to fetch data for.
 * @returns {Promise&lt;Object>} A promise that resolves to an object containing the combined user data.
 * @throws {Error} Throws an error if the network response is not ok or if there is a problem with the fetch operation.
 *
 * @property {Object} userInfos - The user's information.
 * @property {number} todayScore - The user's score for today.
 * @property {Object} keyData - The user's key data.
 * @property {Array} activity - The user's activity sessions.
 * @property {Array} averageSessions - The user's average sessions.
 * @property {Object} performance - The user's performance data.
 * @property {Object} performance.kind - The kind of performance data.
 * @property {Array} performance.data - The performance data.
 */
export async function fetchUserData(userId) {
  try {
    const [userRes, activityRes, averageSessionsRes, performanceRes] = await Promise.all([
      fetch(`${apiUrl}${userId}`),
      fetch(`${apiUrl}${userId}/activity`),
      fetch(`${apiUrl}${userId}/average-sessions`),
      fetch(`${apiUrl}${userId}/performance`),
    ]);

    if (!userRes.ok || !activityRes.ok || !averageSessionsRes.ok || !performanceRes.ok) {
      throw new Error("Network response was not ok");
    }

    const [user, activity, averageSessions, performance] = await Promise.all([
      userRes.json(),
      activityRes.json(),
      averageSessionsRes.json(),
      performanceRes.json(),
    ]);

    const combinedData = {
      userInfos: user.data.userInfos,
      todayScore: user.data.todayScore || user.data.score,
      keyData: user.data.keyData,
      activity: activity.data.sessions,
      averageSessions: averageSessions.data.sessions,
      performance: {
        kind: performance.data.kind,
        data: performance.data.data,
      },
    };
    return combinedData;
  } catch (error) {
    console.error("There was a problem with the fetch operation:", error);
    throw error;
  }
}


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#AverageSessionChart">AverageSessionChart</a></li><li><a href="global.html#ChartActivity">ChartActivity</a></li><li><a href="global.html#Community">Community</a></li><li><a href="global.html#GoalChart">GoalChart</a></li><li><a href="global.html#Home">Home</a></li><li><a href="global.html#IntensityChart">IntensityChart</a></li><li><a href="global.html#Navbar">Navbar</a></li><li><a href="global.html#Profil">Profil</a></li><li><a href="global.html#Setting">Setting</a></li><li><a href="global.html#SideBar">SideBar</a></li><li><a href="global.html#UserName">UserName</a></li><li><a href="global.html#fetchUserData">fetchUserData</a></li><li><a href="global.html#getApportNutritionnel">getApportNutritionnel</a></li><li><a href="global.html#useResponsive">useResponsive</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Thu Jan 30 2025 17:51:30 GMT+0100 (heure normale dâ€™Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
